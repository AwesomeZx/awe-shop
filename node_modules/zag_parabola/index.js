module.exports = parabola;

// 这是一个定点抛物线函数  加入购物车 小球飞入
function parabola(obj, target, speed, callback) {
    // 运动物体当初的位置
    var objPos = {
        left: obj.offsetLeft,
        top: obj.offsetTop
    }

    console.log(objPos);
    // 给定义a系数 为 0.01
    var a = 0.01;
    // 目标点 距离 物体当初的位置 之间的差值坐标
    var coords = {
            x: target.left - objPos.left,
            y: target.top - objPos.top
        }
        // 设置好运动物体的x轴的位移距离 （抛物线看成两个方向上的速度合成）
    console.log(coords);
    var num = 0;

    a -= coords.x / 120 * 0.001;
    var b = (coords.y - a * Math.pow(coords.x, 2)) / coords.x;

    obj.timer = setInterval(function() {
        num += speed;
        obj.style.left = objPos.left + num + 'px';
        obj.style.top = objPos.top + a * num * num + b * num + 'px';

        // 按照x轴方向去做了定时器控制
        if (num >= coords.x) {
            clearInterval(obj.timer);
            obj.timer = null;
            obj.style.left = target.left + 'px';
            obj.style.top = target.top + 'px';
            callback && callback();
        }

    }, 30);

}

let getStyle = (obj, attr) => {
    return obj.currentStyle ? obj.currentStyle[attr] : getComputedStyle(obj)[attr];
}