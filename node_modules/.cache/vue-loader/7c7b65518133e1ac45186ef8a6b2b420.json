{"remainingRequest":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\src\\components\\detailItem\\DetailItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\src\\components\\detailItem\\DetailItem.vue","mtime":1622532348528},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOacrOWcsOeahOaJgOacieWVhuWTgeaVsOaNrue7hOS7tgogICAgICBnb29kc0xpc3RzOiBbXSwKICAgICAgLy8g6K6+572u5LiA5Liq5Lqn5ZOB5a+56LGhIOeUqOadpeWtmCDlvZPliY3lupTor6XmuLLmn5PnmoTkuqflk4EKICAgICAgcHJvZHVjdE9iajoge30sCiAgICAgIC8vIOWIneWni+WMlmlkIOS4uuW9k+WJjei3r+eUseeahGlk5Y+C5pWw55qE5YC8CiAgICAgIGlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5wcm9kdWN0aWQsCiAgICAgIC8vIOW9k+WJjeWVhuWTgeeahOaVsOmHj2NvdW50CiAgICAgIGNvdW50OiAxLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGU6IHsKICAgICAgaGFuZGxlcih0bykgewogICAgICAgIC8vIOaKiuW9k+WJjeeahOaJgOacieaVsOaNrueahOaVsOe7hCDov5vooYzmn6Xmib4g5qC55o2u5b2T5YmN55qEcHJvZHVjdGlk5Y675om+5Yiw5a+55bqU55qE5Lqn5ZOBIOi1i+e7mXByb2R1Y3RPYmoKICAgICAgICB0aGlzLnByb2R1Y3RPYmogPSB0aGlzLmdvb2RzTGlzdHMuZmluZCgKICAgICAgICAgIChpdGVtKSA9PiBpdGVtLnNrdV9pZCA9PSB0by5xdWVyeS5wcm9kdWN0aWQKICAgICAgICApOwogICAgICB9LAogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDorr7nva7kuIDkuKrntKLlvJUg55So5p2l5YiH5o2i6aKc6ImyCiAgICBjdXJyZW50SWR4OiB7CiAgICAgIGdldCgpIHsKICAgICAgICAvLyDlvZPliY1wcm9kdWN0T2JqIOW9k+WJjeS6p+WTgS5jb2xvcl9pZCAg5Y675om+IOW9k+WJjeS6p+WTgeeahC5zcGVjX2pzb24g56ys5Yeg6aG555qEc3BlY192YWx1ZV9pZAogICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RPYmouc3BlY19qc29uLmZpbmRJbmRleCgKICAgICAgICAgIChpdGVtKSA9PiBpdGVtLnNwZWNfdmFsdWVfaWQgPT0gdGhpcy5wcm9kdWN0T2JqLmNvbG9yX2lkCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgc2V0KHZhbCkge30sCiAgICB9LAogIH0sCiAgLy8gdnVl5Yib5bu65a6M5q+V55qE6ZKp5a2Q5Ye95pWwIOWug+WPquS8muWcqOW9k+WJjee7hOS7tuWIm+W7uueahOaXtuWAmeWPquaJp+ihjOS4gOasoQogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICBsZXQgcmVzID0gYXdhaXQgZmV0Y2goIi9kYXRhL2l0ZW1EYXRhLmpzb24iKTsKICAgIGxldCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKCiAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgIHRoaXMuZ29vZHNMaXN0cyA9IGRhdGE7CiAgICB0aGlzLnByb2R1Y3RPYmogPSBkYXRhLmZpbmQoKGl0ZW0pID0+IGl0ZW0uc2t1X2lkID09IHRoaXMuaWQpOwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlUHJvZHVjdChpLCBpZCkgewogICAgICAvLyDnrKzkuIDku7bkuovmg4UKICAgICAgdGhpcy5jdXJyZW50SWR4ID0gaTsKICAgICAgLy8gaWQ6IOW9k+WJjeeahOminOiJsuWIl+ihqCDkvaDngrnlh7vnmoTpgqPkuKrpopzoibLnmoRpZOWAvAogICAgICAvLyDmoLnmja7lvZPliY3nmoRpZOWAvOWOuyDmib7liLDlr7nlupTnmoTkuqflk4EKICAgICAgdGhpcy5wcm9kdWN0T2JqID0gdGhpcy5nb29kc0xpc3RzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uY29sb3JfaWQgPT0gaWQpOwogICAgICAvLyDmiorlvZPliY3nmoTlnLDlnYAg5p+l6K+i5Y+C5pWwIOabtOaUueS4gOS4iwogICAgICAvLyDosIPnlKggJHJvdXRlci5wdXNoKCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJkZXRhaWxzIiwKICAgICAgICBxdWVyeTogeyBwcm9kdWN0aWQ6IHRoaXMucHJvZHVjdE9iai5za3VfaWQgfSwKICAgICAgfSk7CiAgICAgIC8vIOWPquimgeS4gOWIh+aNouS6p+WTgSDlsLHnq4vljbPmiopjb3VudOW9kiAxCiAgICAgIHRoaXMuY291bnQgPSAxOwogICAgfSwKICAgIC8vIOWHj+WwkeaVsOmHjwogICAgcmVkdWNlQ291bnQoKSB7CiAgICAgIGlmICh0aGlzLmNvdW50ID4gMSkgewogICAgICAgIHRoaXMuY291bnQtLTsKICAgICAgfQogICAgfSwKICAgIC8vIOWinuWKoOaVsOmHjwogICAgYWRkQ291bnQoKSB7CiAgICAgIC8vIOS4jeiDvei2hei/h+WVhuWTgeeahOmZkOWItuacgOWkp+aVsOmHjwogICAgICBpZiAodGhpcy5jb3VudCA8IHRoaXMucHJvZHVjdE9iai5saW1pdF9udW0pIHsKICAgICAgICB0aGlzLmNvdW50Kys7CiAgICAgIH0KICAgIH0sCiAgICBhZGRDYXJ0KGUpIHsKICAgICAgLy8gdGhpcy4kcGFvd3UoZSx0aGlzLnByb2R1Y3RPYmouYWxpX2ltYWdlKTsKCiAgICAgIC8v6LCD55So5bCP55CD6aOe5YWl55qE5oqb54mp57q/5Ye95pWwIOaJp+ihjOWKqOeUuwogICAgICB0aGlzLiRwYW93dSh0aGlzLnByb2R1Y3RPYmouYWxpX2ltYWdlLCBlKTsKICAgICAgLy8g5Yqg5YWl6LSt54mp5qCPCgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImFkZENhcnRQcm9kdWN0IiwgewogICAgICAgIHByb2R1Y3RPYmo6IHRoaXMucHJvZHVjdE9iaiwKICAgICAgICBjb3VudDogdGhpcy5jb3VudCwKICAgICAgfSk7CiAgICAgIC8vIOaYvuekuui0reeJqeagjwogICAgICAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dPckhpZGVDYXJ0Jyx7Ym9vbDp0cnVlfSkKICAgIH0sCiAgICBnb3RvQ2FydCgpIHsKICAgICAgLy8g5oqK5b2T5YmN5ZWG5ZOB5a+56LGh5Lul5Y+K5pWw6YePIOS8oOi/h+WOuyDliqDlhaXliLDotK3nianovaYKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJhZGRDYXJ0UHJvZHVjdCIsIHsKICAgICAgICBwcm9kdWN0T2JqOiB0aGlzLnByb2R1Y3RPYmosCiAgICAgICAgY291bnQ6IHRoaXMuY291bnQsCiAgICAgIH0pOwogICAgICAvLyDpgJrov4ckcm91dGVyLnB1c2gKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiY2FydHBhZ2UiIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["DetailItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailItem.vue","sourceRoot":"src/components/detailItem","sourcesContent":["<template>\n  <div class=\"store-content item\">\n    <div class=\"item-box\">\n      <div class=\"gallery-wrapper\">\n        <div class=\"gallery\">\n          <div class=\"thumb\">\n            <ul>\n              <li class=\"on\">\n                <img style=\"width:100%;\" :src=\"productObj.ali_image\" />\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"banner\">\n        <div class=\"sku-custom-title\">\n          <div class=\"params-price\">\n            <span>\n              <em>¥</em>\n              <i>{{productObj.price}}</i>\n            </span>\n          </div>\n          <div class=\"params-info\">\n            <h4>{{productObj.title}}</h4>\n            <h6>{{productObj.sub_title}}</h6>\n          </div>\n        </div>\n        <div class=\"sku-dynamic-params-panel\">\n          <div class=\"sku-dynamic-params clear\">\n            <span class=\"params-name\">颜色</span>\n            <ul class=\"params-colors\">\n              <li\n                :class=\"{cur: currentIdx==i}\"\n                v-for=\"(color,i) in productObj.spec_json\"\n                :key=\"color.spec_value_id\"\n                @click=\"changeProduct(i,color.spec_value_id)\"\n              >\n                <a>\n                  <i>\n                    <img :src=\"color.image\" />\n                  </i>\n                </a>\n              </li>\n            </ul>\n          </div>\n          <div class=\"sku-dynamic-params clear\">\n            <div class=\"params-name\">数量</div>\n            <div class=\"params-detail clear\">\n              <div class=\"item-num js-select-quantity\">\n                <span :class=\"{'down':true, 'down-disabled': count<=1 }\" @click=\"reduceCount\">-</span>\n                <span class=\"num\">{{count}}</span>\n                <span\n                  :class=\"{'up':true, 'up-disabled': count>= productObj.limit_num }\"\n                  @click=\"addCount\"\n                >+</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"sku-status\">\n          <div class=\"cart-operation-wrapper clearfix\">\n            <span class=\"blue-title-btn js-add-cart\" @click=\"addCart\">\n              <a>加入购物车</a>\n            </span>\n            <span class=\"gray-title-btn\" @click=\"gotoCart\">\n              <a>现在购买</a>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from \"vuex\";\nexport default {\n  data() {\n    return {\n      // 本地的所有商品数据组件\n      goodsLists: [],\n      // 设置一个产品对象 用来存 当前应该渲染的产品\n      productObj: {},\n      // 初始化id 为当前路由的id参数的值\n      id: this.$route.query.productid,\n      // 当前商品的数量count\n      count: 1,\n    };\n  },\n  watch: {\n    $route: {\n      handler(to) {\n        // 把当前的所有数据的数组 进行查找 根据当前的productid去找到对应的产品 赋给productObj\n        this.productObj = this.goodsLists.find(\n          (item) => item.sku_id == to.query.productid\n        );\n      },\n    },\n  },\n  computed: {\n    // 设置一个索引 用来切换颜色\n    currentIdx: {\n      get() {\n        // 当前productObj 当前产品.color_id  去找 当前产品的.spec_json 第几项的spec_value_id\n        return this.productObj.spec_json.findIndex(\n          (item) => item.spec_value_id == this.productObj.color_id\n        );\n      },\n      set(val) {},\n    },\n  },\n  // vue创建完毕的钩子函数 它只会在当前组件创建的时候只执行一次\n  async created() {\n    let res = await fetch(\"/data/itemData.json\");\n    let data = await res.json();\n\n    console.log(data);\n    this.goodsLists = data;\n    this.productObj = data.find((item) => item.sku_id == this.id);\n  },\n  methods: {\n    changeProduct(i, id) {\n      // 第一件事情\n      this.currentIdx = i;\n      // id: 当前的颜色列表 你点击的那个颜色的id值\n      // 根据当前的id值去 找到对应的产品\n      this.productObj = this.goodsLists.find((item) => item.color_id == id);\n      // 把当前的地址 查询参数 更改一下\n      // 调用 $router.push()\n      this.$router.push({\n        name: \"details\",\n        query: { productid: this.productObj.sku_id },\n      });\n      // 只要一切换产品 就立即把count归 1\n      this.count = 1;\n    },\n    // 减少数量\n    reduceCount() {\n      if (this.count > 1) {\n        this.count--;\n      }\n    },\n    // 增加数量\n    addCount() {\n      // 不能超过商品的限制最大数量\n      if (this.count < this.productObj.limit_num) {\n        this.count++;\n      }\n    },\n    addCart(e) {\n      // this.$paowu(e,this.productObj.ali_image);\n\n      //调用小球飞入的抛物线函数 执行动画\n      this.$paowu(this.productObj.ali_image, e);\n      // 加入购物栏\n\n      this.$store.commit(\"addCartProduct\", {\n        productObj: this.productObj,\n        count: this.count,\n      });\n      // 显示购物栏\n      // this.$store.commit('showOrHideCart',{bool:true})\n    },\n    gotoCart() {\n      // 把当前商品对象以及数量 传过去 加入到购物车\n      this.$store.commit(\"addCartProduct\", {\n        productObj: this.productObj,\n        count: this.count,\n      });\n      // 通过$router.push\n      this.$router.push({ name: \"cartpage\" });\n    },\n  },\n};\n</script>\n\n<style>\n</style>"]}]}