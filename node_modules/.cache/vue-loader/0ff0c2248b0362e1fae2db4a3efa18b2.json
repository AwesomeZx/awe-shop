{"remainingRequest":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\src\\components\\addressPop\\AddressPop.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\src\\components\\addressPop\\AddressPop.vue","mtime":1622463162093},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\前端\\VsCode\\前端14期\\vue\\day37\\手机商城\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczp7CiAgICBpc3Nob3c6IEJvb2xlYW4sCiAgICBhZGREYXRhOiBPYmplY3QKICB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGFkZHJlc3NJbmZvOiB7CiAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICBwaG9uZTogJycsCiAgICAgICAgICAgIGFyZWFjb2RlOiAnJywKICAgICAgICAgICAgdGVsOiAnJywKICAgICAgICAgICAgcHJvdmluY2VJZDogIjAiLAogICAgICAgICAgICBwcm92aW5jZTogJycsCiAgICAgICAgICAgIGNpdHlJZDogIjAiLAogICAgICAgICAgICBjaXR5OiAiIiwKICAgICAgICAgICAgYXJlYXNJZDogIjAiLAogICAgICAgICAgICBhcmVhczogIiIsCiAgICAgICAgICAgIGFkZDogJycsCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgfSwKICAgICAgb2xkQWRkcmVzc0luZm86ewogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBwaG9uZTogJycsCiAgICAgICAgICBhcmVhY29kZTogJycsCiAgICAgICAgICB0ZWw6ICcnLAogICAgICAgICAgcHJvdmluY2VJZDogIjAiLAogICAgICAgICAgcHJvdmluY2U6ICcnLAogICAgICAgICAgY2l0eUlkOiAiMCIsCiAgICAgICAgICBjaXR5OiAiIiwKICAgICAgICAgIGFyZWFzSWQ6ICIwIiwKICAgICAgICAgIGFyZWFzOiAiIiwKICAgICAgICAgIGFkZDogJycsCiAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICB9LAogICAgICBhbGxEYXRhczogW10sCiAgICAgIC8vIOecgeWIl+ihqAogICAgICBwcm92aW5jZUxpc3RzOiBbXSwKICAgICAgLy8g5biC5YiX6KGoCiAgICAgIGNpdHlMaXN0czogW10sCiAgICAgIC8vIOWMuuWOv+WIl+ihqAogICAgICBhcmVhc0xpc3RzOiBbXSwKICAgICAgLy8g5aeT5ZCN55qE6aqM6K+BCiAgICAgIHZlcmlmeU5hbWU6ICcgJywKICAgICAgdmVyaWZ5UGhvbmU6IiAiCgogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGFkZERhdGE6ewogICAgICBoYW5kbGVyKG9iail7CiAgICAgICAgaWYob2JqKXsKICAgICAgICAgIC8vIOS/ruaUuQogICAgICAgICAgdGhpcy5hZGRyZXNzSW5mbyA9IG9iajsKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICB0aGlzLmFkZHJlc3NJbmZvID0gdGhpcy5vbGRBZGRyZXNzSW5mbzsKICAgICAgICB9CgogICAgIH0sCiAgICAgaW1tZWRpYXRlOnRydWUKICAgICAgCiAgICB9LAogICAgImFkZHJlc3NJbmZvLm5hbWUiKHZhbCl7CiAgICAgIAogICAgICAgIGlmKCh2YWwubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoID40KSApIHsKICAgICAgICAgIHRoaXMudmVyaWZ5TmFtZSA9ICfmgqjovpPlhaXnmoTlp5PlkI3kuI3nrKblkIjop4TliJknCiAgICAgICAgfWVsc2UgewogICAgICAgICAgdGhpcy52ZXJpZnlOYW1lID0gJyc7CiAgICAgICAgfQogICAgICAKICAgICAgCiAgICB9LAogICAgImFkZHJlc3NJbmZvLnBob25lIih2YWwpewogICAgICBpZigvXjFbMzU2NzldXGR7OX0kLy50ZXN0KHZhbCkpewogICAgICAgIHRoaXMudmVyaWZ5UGhvbmUgPSAnJwogICAgICB9ZWxzZSB7CiAgICAgICAgdGhpcy52ZXJpZnlQaG9uZSA9ICfmgqjnmoTmiYvmnLrlj7fkuI3nrKblkIjop4TliJknCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOnsKICAgIGFsbENoZWNrZWQoKXsKICAgICAgLy8g5piv5ZCm5YWo6YOo6YCa6L+H5qCh6aqMCiAgICAgIGlmKHRoaXMudmVyaWZ5UGhvbmU9PScnJiZ0aGlzLnZlcmlmeU5hbWU9PScnJiZ0aGlzLmFkZHJlc3NJbmZvLmFkZCE9JycpewogICAgICAgIC8vIOagoemqjOmAmui/h+S6hgogICAgICAgIC8vIGNvbnNvbGUubG9nKCflvZPliY3kvaDloavlhpnnmoTlnLDlnYDlt7Lnu4/pgJrov4fmoKHpqozkuoYnKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfWVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczp7CiAgICBjbG9zZUZuKCl7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTppc3Nob3cnLGZhbHNlKQogICAgfSwKICAgIC8vIOabtOaUueecgeW4guWMuueahOaWueazlQogICAgY2hhbmdlQWRkcmVzcyh0aXApewogICAgIAogICAgICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQudmFsdWUpOwogICAgICBpZih0aXA9PSdwJyl7CiAgICAgICAgICAgLy8g6I635Y+W5omA5pyJ55qE5biCCiAgICAgICAgdGhpcy5jaXR5TGlzdHMgPSB0aGlzLmFsbERhdGFzLmZpbHRlcihpdGVtPT5pdGVtLnBpZD09PWV2ZW50LnRhcmdldC52YWx1ZSkKICAgICAgICB0aGlzLmFkZHJlc3NJbmZvLmNpdHlJZCA9ICcwJzsKICAgICAgICB0aGlzLmFyZWFzTGlzdHMgPSBbXTsKICAgICAgICB0aGlzLmFkZHJlc3NJbmZvLmFyZWFzSWQgPSAnMCc7CiAgICAgIH1lbHNlIGlmKHRpcCA9PSAnYycpIHsKICAgICAgICAgICAvLyDojrflj5bmiYDmnInnmoTluIIKICAgICAgICB0aGlzLmFyZWFzTGlzdHMgPSB0aGlzLmFsbERhdGFzLmZpbHRlcihpdGVtPT5pdGVtLnBpZD09PWV2ZW50LnRhcmdldC52YWx1ZSkKICAgICAgICB0aGlzLmFkZHJlc3NJbmZvLmFyZWFzSWQgPSAnMCc7CiAgICAgIH0KICAgCiAgICB9LAogICAgc2F2ZURhdGEoKXsKICAgICAgLy8g6L+Z5Liq5pa55rOVIOaXouWPr+iDveaYryDmt7vliqDkuIDkuKrmlrDlnLDlnYAg5Lmf5Y+v5Lul5pivIOS/ruaUueS4gOS4quWOn+acieWcsOWdgAoKICAgICAgdGhpcy5hbGxEYXRhcy5mb3JFYWNoKGl0ZW09PnsKCiAgICAgICAgaWYoaXRlbS5haWQ9PXRoaXMuYWRkcmVzc0luZm8ucHJvdmluY2VJZCl7CiAgICAgICAgICAgdGhpcy5hZGRyZXNzSW5mby5wcm92aW5jZSA9IGl0ZW0uYXRpdGxlCiAgICAgICAgfQogICAgICAgIGlmKGl0ZW0uYWlkPT10aGlzLmFkZHJlc3NJbmZvLmNpdHlJZCl7CiAgICAgICAgICAgdGhpcy5hZGRyZXNzSW5mby5jaXR5ID0gaXRlbS5hdGl0bGUKICAgICAgICB9CiAgICAgICAgaWYoaXRlbS5haWQ9PXRoaXMuYWRkcmVzc0luZm8uYXJlYXNJZCl7CiAgICAgICAgICAgdGhpcy5hZGRyZXNzSW5mby5hcmVhcyA9IGl0ZW0uYXRpdGxlCiAgICAgICAgfQoKICAgICAgfSkKICAgICAgCiAgICAgIC8vIOmAmui/hyBhZGREYXRhIOWIsOW6leaYr+aUtui0p+WcsOWdgOWvueixoSjkv67mlLkpIOi/mOaYryBudWxsICjmt7vliqApCiAgICAgIGlmKHRoaXMuYWRkRGF0YSkgewogICAgICAgIC8vIOimgeS/ruaUuQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2F2ZURhdGEnLHtpbmZvOnRoaXMuYWRkcmVzc0luZm8sdHlwZTonbW9kaWZ5J30pCiAgICAgIH1lbHNlIHsKICAgICAgICAvLyDopoHmt7vliqDmlrDnmoQKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NhdmVEYXRhJyx7aW5mbzp0aGlzLmFkZHJlc3NJbmZvLHR5cGU6J2FkZCd9KQogICAgICB9CgogICAgCiAgICAgIC8vIOaKiuS9huWJjeeahOaVtOS4quWcsOWdgOS/oeaBr+mHjee9ruS4uuWIneWni+WMlueKtuaAgQogICAgICB0aGlzLmFkZHJlc3NJbmZvID0gdGhpcy5vbGRBZGRyZXNzSW5mbzsKICAgICAgLy8g6LCB5Zyo5b2T5YmN55qE5by55Ye65qGG6ZqQ6JePCiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTppc3Nob3cnLGZhbHNlKQogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaCgnL2RhdGEvYXJlYXMuanNvbicpCiAgICB0aGlzLmFsbERhdGFzID0gYXdhaXQgcmVzLmpzb24oKTsKCiAgICAvLyDlhYjmi7/liLDmiYDmnInnnIEKICAgIHRoaXMucHJvdmluY2VMaXN0cyA9IHRoaXMuYWxsRGF0YXMuZmlsdGVyKGl0ZW09Pml0ZW0ucGlkPT0nJykKICAgIAogIH0sCn07Cg=="},{"version":3,"sources":["AddressPop.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"AddressPop.vue","sourceRoot":"src/components/addressPop","sourcesContent":["<template>\n  <div id=\"pop\">\n    <div class=\"module-dialog-layer\" style=\"display: block\"></div>\n    <div class=\"module-dialog clear module-dialog-address module-dialog-show\">\n      <div class=\"dialog-panel\">\n        <div class=\"topbar\">\n          <div class=\"dialog-tit clear\">\n            <h4 class=\"js-dialog-title\">管理收货地址</h4>\n          </div>\n          <span class=\"dialog-close\" @click=\"closeFn\">x</span>\n        </div>\n        <div class=\"dialog-con js-dialog-container\">\n          <div class=\"animate-layer\">\n            <div class=\"dialog-inner js-address-add\">\n              <div class=\"save-address-box\">\n                <div class=\"address-form\">\n                  <div class=\"module-form-row\">\n                    <div class=\"form-item-v3\">\n                      <!-- <i>收货人姓名</i> -->\n                      <input type=\"text\" class=\"js-verify\" placeholder=\"收货人姓名\"\n                      v-model=\"addressInfo.name\" />\n                      <div class=\"verify-error\">{{verifyName}}</div>\n                    </div>\n                  </div>\n                  <div class=\"module-form-row\">\n                    <div class=\"form-item-v3\">\n                      <!-- <i>手机号</i> -->\n                      <input type=\"text\" class=\"js-verify\" placeholder=\"手机号\"\n                      v-model=\"addressInfo.phone\" />\n                      <div class=\"verify-error\">{{verifyPhone}}</div>\n                    </div>\n                  </div>\n                  <div class=\"module-form-row clear\">\n                    <div\n                      class=\"form-item-v3 area-code-w fn-left form-valid-item\"\n                    >\n                      <!-- <i>区号（可选）</i> -->\n                      <input\n                        type=\"text\"\n                        class=\"js-verify js-address-area-code\"\n                        placeholder=\"区号（可选）\"\n                        v-model=\"addressInfo.areacode\"\n                      />\n                      <div class=\"verify-error\"></div>\n                    </div>\n                    <div\n                      class=\"form-item-v3 telephone-w fn-right form-valid-item\"\n                    >\n                      <!-- <i>固定电话（可选）</i> -->\n                      <input\n                        type=\"text\"\n                        class=\"js-verify js-address-telephone\"\n                        placeholder=\"固定电话（可选）\"\n                        v-model=\"addressInfo.tel\"\n                      />\n                      <div class=\"verify-error\"></div>\n                    </div>\n                  </div>\n                  <div class=\"module-form-row clear\">\n                    <div class=\"form-item-v3 select-item province-wrapper\">\n                      <select\n                        name=\"province_code\"\n                        v-model=\"addressInfo.provinceId\"\n                        class=\"province select-province js-form-province js-verify\"\n                        @change=\"changeAddress('p')\"\n                      >\n                        <option value=\"0\">请选择省份</option>\n                        <option :value=\"item.aid\"\n                        v-for=\"item in provinceLists\"\n                        :key=\"item.aid\">{{item.atitle}}</option>\n                       \n                      </select>\n                    </div>\n                  </div>\n                  <div class=\"module-form-row clear\">\n                    <div\n                      class=\"form-item-v3 select-item city-wrapper fn-left form-focus-item\"\n                    >\n                      <select class=\"city select-city js-form-city js-verify\"\n                      v-model=\"addressInfo.cityId\"\n                      @change=\"changeAddress('c')\">\n                        <option value=\"0\">请选择城市</option>\n                        <option :value=\"item.aid\"\n                        v-for=\"item in cityLists\"\n                        :key=\"item.aid\">{{item.atitle}}</option>\n                      </select>\n                    </div>\n                    <div\n                      class=\"form-item-v3 select-item district-wrapper fn-right form-focus-item\"\n                    >\n                      <select class=\"city select-city js-form-city js-verify\"\n                      v-model=\"addressInfo.areasId\">\n                        <option value=\"0\">请选择区县</option>\n                        <option :value=\"item.aid\"\n                        v-for=\"item in areasLists\"\n                        :key=\"item.aid\">{{item.atitle}}</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class=\"module-form-row\">\n                    <div class=\"form-item-v3\">\n                      <!-- <i>详细地址，如街道名称，楼层，门牌号码等</i> -->\n                      <input type=\"text\" class=\"js-verify\" placeholder=\"详细地址，如街道名称，楼层，门牌号码等\" \n                      v-model=\"addressInfo.add\"/>\n                      <div class=\"verify-error\"></div>\n                    </div>\n                  </div>\n                  <div class=\"module-form-row fn-clear\">\n                    <input type=\"checkbox\" class=\"hide\" />\n                    <span class=\"blue-checkbox\" :class=\"{'blue-checkbox-on': addressInfo.default}\"\n                    @click=\"addressInfo.default=!addressInfo.default\"></span>设为默认\n                  </div>\n                  <div\n                    class=\"dialog-blue-btn big-main-btn js-verify-address\"\n                    :class=\"{'disabled-btn': !allChecked}\"\n                    @click=\"saveData\"\n                  >\n                    <a>保存</a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props:{\n    isshow: Boolean,\n    addData: Object\n  },\n  data(){\n    return {\n      addressInfo: {\n            name: '',\n            phone: '',\n            areacode: '',\n            tel: '',\n            provinceId: \"0\",\n            province: '',\n            cityId: \"0\",\n            city: \"\",\n            areasId: \"0\",\n            areas: \"\",\n            add: '',\n            default: false\n        },\n      oldAddressInfo:{\n          name: '',\n          phone: '',\n          areacode: '',\n          tel: '',\n          provinceId: \"0\",\n          province: '',\n          cityId: \"0\",\n          city: \"\",\n          areasId: \"0\",\n          areas: \"\",\n          add: '',\n          default: false\n      },\n      allDatas: [],\n      // 省列表\n      provinceLists: [],\n      // 市列表\n      cityLists: [],\n      // 区县列表\n      areasLists: [],\n      // 姓名的验证\n      verifyName: ' ',\n      verifyPhone:\" \"\n\n    }\n  },\n  watch: {\n    addData:{\n      handler(obj){\n        if(obj){\n          // 修改\n          this.addressInfo = obj;\n        }else {\n          this.addressInfo = this.oldAddressInfo;\n        }\n\n     },\n     immediate:true\n      \n    },\n    \"addressInfo.name\"(val){\n      \n        if((val.length < 2 || val.length >4) ) {\n          this.verifyName = '您输入的姓名不符合规则'\n        }else {\n          this.verifyName = '';\n        }\n      \n      \n    },\n    \"addressInfo.phone\"(val){\n      if(/^1[35679]\\d{9}$/.test(val)){\n        this.verifyPhone = ''\n      }else {\n        this.verifyPhone = '您的手机号不符合规则'\n      }\n    }\n  },\n  computed:{\n    allChecked(){\n      // 是否全部通过校验\n      if(this.verifyPhone==''&&this.verifyName==''&&this.addressInfo.add!=''){\n        // 校验通过了\n        // console.log('当前你填写的地址已经通过校验了');\n        return true;\n      }else {\n        return false;\n      }\n    }\n  },\n  methods:{\n    closeFn(){\n      this.$emit('update:isshow',false)\n    },\n    // 更改省市区的方法\n    changeAddress(tip){\n     \n      console.log(event.target.value);\n      if(tip=='p'){\n           // 获取所有的市\n        this.cityLists = this.allDatas.filter(item=>item.pid===event.target.value)\n        this.addressInfo.cityId = '0';\n        this.areasLists = [];\n        this.addressInfo.areasId = '0';\n      }else if(tip == 'c') {\n           // 获取所有的市\n        this.areasLists = this.allDatas.filter(item=>item.pid===event.target.value)\n        this.addressInfo.areasId = '0';\n      }\n   \n    },\n    saveData(){\n      // 这个方法 既可能是 添加一个新地址 也可以是 修改一个原有地址\n\n      this.allDatas.forEach(item=>{\n\n        if(item.aid==this.addressInfo.provinceId){\n           this.addressInfo.province = item.atitle\n        }\n        if(item.aid==this.addressInfo.cityId){\n           this.addressInfo.city = item.atitle\n        }\n        if(item.aid==this.addressInfo.areasId){\n           this.addressInfo.areas = item.atitle\n        }\n\n      })\n      \n      // 通过 addData 到底是收货地址对象(修改) 还是 null (添加)\n      if(this.addData) {\n        // 要修改\n        this.$store.commit('saveData',{info:this.addressInfo,type:'modify'})\n      }else {\n        // 要添加新的\n        this.$store.commit('saveData',{info:this.addressInfo,type:'add'})\n      }\n\n    \n      // 把但前的整个地址信息重置为初始化状态\n      this.addressInfo = this.oldAddressInfo;\n      // 谁在当前的弹出框隐藏\n      this.$emit('update:isshow',false)\n    }\n  },\n  async created() {\n    let res = await fetch('/data/areas.json')\n    this.allDatas = await res.json();\n\n    // 先拿到所有省\n    this.provinceLists = this.allDatas.filter(item=>item.pid=='')\n    \n  },\n};\n</script>\n\n<style>\n</style>"]}]}